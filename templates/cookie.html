<!DOCTYPE html>
{% extends 'base.html' %} {% block content %}

<nav>
	<div class="nav-wrapper">
		<div class="col s12">
			<a href="{{url_for('get_recipes')}}" class="breadcrumb">Cookies</a>
			<a href="#!" class="breadcrumb">{{recipe.recipe_category}}</a>
		</div>
	</div>
</nav>

<div class="row cookie" style="background-image: url(../static/assets/images/{{recipe.image_source}});">
	<div class="col s12 m4">
		<div class="card blue-grey darken-1">
			<div class="card-content white-text">
				<span class="card-title">{{recipe.cookie_name.upper()}}</span>
				{# combine qty and ingredient lists #}
				{# TODO need to add line break after ingredient item #}
				{# https://stackoverflow.com/questions/47761202/combine-two-lists-and-alternating-the-result-in-jinja #}
				{%- set rows_combined = (recipe.qty, recipe.ingredients) -%}
				{%- set lengths = [] %}

				{%- for row in rows_combined -%}
				{%- if lengths.append(row | length)-%}
				{%- endif -%}
				{%- endfor -%}

				{%- set max_length = (lengths | sort)[-1] -%}
				{%- set rows = [] -%}

				{# Loops through a range of max_length #}
				{%- for r in range(max_length) -%}
				{# Loops through the tuple containing row_one and row_two #}
				{%- for a in rows_combined -%}
				{# checks if a[r] exists if based on current index, if so appends it rows #}
				{%- if a[r] -%}
				{%- if rows.append(a[r]) -%}
				{%- endif -%}
				{%- endif -%}
				{%- endfor -%}
				{%- endfor -%}

				<ul>
					<li>{{ rows | join(' ') }}</li>
				</ul>
				<br />
				<p>{{ recipe.steps | join(' \n') }}</p>
			</div>
			<div class="card-action">
				<p>{{recipe.recipe_category}}</p>
                {% set recipe_author = recipe.firstname + ' ' + recipe.lastname %}
				<p>{{recipe_author}}</p>
                <a href="{{url_for('edit_recipe', recipe_id=recipe._id)}}">Edit</a>
			    <a href="{{url_for('delete_recipe', recipe_id=recipe._id)}}" onclick="return confirm('Are you sure you want to delete this item?');">Delete</a>
			</div>
		</div>
	</div>
</div>

{% endblock %}